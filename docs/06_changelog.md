# 作業履歴

## 2026-02-19

### さがす画面UI改善
- 3タブ構成 → 2段構成に変更（上部TabBar + ミニトグル）
- 上部: 「友達の大会」「みんなの大会」（予定タブと同じTabBarスタイル）
- 下部: 「大会」「メンバー募集」（左寄せミニトグル）
- 大会カードを予定タブ風デザインに統一（左に日付、右に情報）
- 友達の大会: フォロー中の主催者の大会のみ表示
- みんなの大会: フォロー外の主催者で募集中/終了のみ表示
- エントリーにはフォローが必要（未フォローバッジ表示）

### 予定タブFirestore連携
- デモデータ → Firestoreから参加中・主催の大会を自動取得
- 「次の大会」ハイライトカード（残り日数表示）
- 開催予定タブ: 主催/参加の大会を日付順で表示
- 過去の大会タブ: 終了した大会一覧 + 戦績サマリー
- 下に引っ張って更新（RefreshIndicator）

### 大会作成スケジュール設定UI
- 大会作成シートにTimePickerで時間設定追加
- 開場・受付・開会式・試合開始・決勝予定・閉会式

### 大会結果セクション
- ステータス「終了」時に概要タブに大会結果カード表示
- 決勝ブラケットから優勝・準優勝を自動取得

### バグ修正
- 重複メソッド（_buildResultRow, _buildTimeRow）修正
- 文字列エスケープ修正（tournament_management_screen.dart）

## 2026-02-18
1. バグ修正: score_input_screen.dart SnackBarメッセージ空文字→日本語化
2. バグ修正: 全試合完了時ステータス数字のみ→「予選N完了」に修正
3. バグ修正: 順位表の自チーム背景色を赤系ハイライトに変更
4. PDFダウンロード機能追加（大会要項・対戦表・トーナメント表の3種）
5. pdf_generator.dart 新規作成（Noto Sans JP対応）
6. 共有ボタン→PDFダウンロードシートUI実装
7. エントリー締切自動チェック追加（deadline過ぎたらボタン非表示）
8. スケジュール設定フィールド追加（tournament_management_screen.dart）
9. DEV_STATUS.md 作成（チャット引き継ぎ用）
10. Firebase Hosting デプロイ

## 2026-02-16
1. 自チームハイライト実装（対戦表・順位表でチーム名に赤文字太字）
2. 審判チーム自動割り当て（match_generator.dart に refereeTeamId/Name 追加）
3. 対戦表に審判チーム表示（「第1試合（審判: スパイカーズ）」形式）
4. スコア入力画面に審判チーム表示（赤枠バナー）
5. コート表記変更（コート1 → Aコート）
6. 第N試合表記追加
7. コート順ソート（A→B→C順に固定）
8. スコアバリデーション強化（ジュース時 17-5 をブロック、14-14以上でのみデュース適用）
9. スコア自動保存（入力中にFirestoreへリアルタイム保存、戻っても消えない）
10. 開催中のエントリーボタン完全非表示
11. タブ名「参加チーム」→「チーム」に短縮
12. 掲示板ピン留めボタン追加（主催者のみ）
13. Firebase Hosting デプロイ（複数回）

## 2026-02-15
1. ログアウトボタンを設定画面に移動
2. ルール設定UI全面改修
3. 会場登録・検索・連携
4. 大会詳細画面遷移修正
5. ステータスカラー修正
6. 対戦表タブ修正（Firestore複合インデックス問題回避）
7. スコア入力方式変更（1点ずつ加算→数字入力）
8. バリデーション追加（15点先取ルール）
9. スライド確認実装（主審・監督）
10. 順位自動集計確認
11. 決勝トーナメント生成確認
12. 概要タブ充実（会場住所・コート数・種別・参加費）
13. タイムライン→掲示板名称変更
14. エントリーボタン無効化（開催中）
15. テストチーム追加・リセット機能
